{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":38,"index":142}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useFavoritesStore\", {\n    enumerable: true,\n    get: function () {\n      return useFavoritesStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  const useFavoritesStore = (0, _zustand.create)((set, get) => ({\n    sessionId: '',\n    productIds: [],\n    products: [],\n    isLoading: false,\n    initSession: async () => {\n      try {\n        let sessionId = await AsyncStorage.default.getItem('session_id');\n        if (!sessionId) {\n          sessionId = 'session_' + Math.random().toString(36).substr(2, 9);\n          await AsyncStorage.default.setItem('session_id', sessionId);\n        }\n        set({\n          sessionId\n        });\n        await get().fetchFavorites();\n      } catch (error) {\n        console.error('Error initializing session:', error);\n      }\n    },\n    fetchFavorites: async () => {\n      const {\n        sessionId\n      } = get();\n      if (!sessionId) return;\n      set({\n        isLoading: true\n      });\n      try {\n        const response = await _servicesApi.api.get(`/favorites/${sessionId}`);\n        set({\n          productIds: response.data.product_ids || [],\n          products: response.data.products || [],\n          isLoading: false\n        });\n      } catch (error) {\n        console.error('Error fetching favorites:', error);\n        set({\n          isLoading: false\n        });\n      }\n    },\n    toggleFavorite: async productId => {\n      const {\n        sessionId,\n        productIds\n      } = get();\n      if (!sessionId) return;\n\n      // Optimistic update\n      const isFav = productIds.includes(productId);\n      set({\n        productIds: isFav ? productIds.filter(id => id !== productId) : [...productIds, productId]\n      });\n      try {\n        await _servicesApi.api.post(`/favorites/${sessionId}/toggle/${productId}`);\n        await get().fetchFavorites();\n      } catch (error) {\n        console.error('Error toggling favorite:', error);\n        // Revert on error\n        set({\n          productIds\n        });\n      }\n    },\n    isFavorite: productId => {\n      return get().productIds.includes(productId);\n    }\n  }));\n});","lineCount":91,"map":[[12,2,28,0,"Object"],[12,8,28,0],[12,9,28,0,"defineProperty"],[12,23,28,0],[12,24,28,0,"exports"],[12,31,28,0],[13,4,28,0,"enumerable"],[13,14,28,0],[14,4,28,0,"get"],[14,7,28,0],[14,18,28,0,"get"],[14,19,28,0],[15,6,28,0],[15,13,28,0,"useFavoritesStore"],[15,30,28,0],[16,4,28,0],[17,2,28,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_servicesApi"],[21,18,3,0],[21,21,3,0,"require"],[21,28,3,0],[21,29,3,0,"_dependencyMap"],[21,43,3,0],[22,2,28,7],[22,8,28,13,"useFavoritesStore"],[22,25,28,30],[22,28,28,33],[22,32,28,33,"create"],[22,40,28,39],[22,41,28,39,"create"],[22,47,28,39],[22,49,28,56],[22,50,28,57,"set"],[22,53,28,60],[22,55,28,62,"get"],[22,58,28,65],[22,64,28,71],[23,4,29,2,"sessionId"],[23,13,29,11],[23,15,29,13],[23,17,29,15],[24,4,30,2,"productIds"],[24,14,30,12],[24,16,30,14],[24,18,30,16],[25,4,31,2,"products"],[25,12,31,10],[25,14,31,12],[25,16,31,14],[26,4,32,2,"isLoading"],[26,13,32,11],[26,15,32,13],[26,20,32,18],[27,4,34,2,"initSession"],[27,15,34,13],[27,17,34,15],[27,23,34,15,"initSession"],[27,24,34,15],[27,29,34,27],[28,6,35,4],[28,10,35,8],[29,8,36,6],[29,12,36,10,"sessionId"],[29,21,36,19],[29,24,36,22],[29,30,36,28,"AsyncStorage"],[29,42,36,40],[29,43,36,40,"default"],[29,50,36,40],[29,51,36,41,"getItem"],[29,58,36,48],[29,59,36,49],[29,71,36,61],[29,72,36,62],[30,8,37,6],[30,12,37,10],[30,13,37,11,"sessionId"],[30,22,37,20],[30,24,37,22],[31,10,38,8,"sessionId"],[31,19,38,17],[31,22,38,20],[31,32,38,30],[31,35,38,33,"Math"],[31,39,38,37],[31,40,38,38,"random"],[31,46,38,44],[31,47,38,45],[31,48,38,46],[31,49,38,47,"toString"],[31,57,38,55],[31,58,38,56],[31,60,38,58],[31,61,38,59],[31,62,38,60,"substr"],[31,68,38,66],[31,69,38,67],[31,70,38,68],[31,72,38,70],[31,73,38,71],[31,74,38,72],[32,10,39,8],[32,16,39,14,"AsyncStorage"],[32,28,39,26],[32,29,39,26,"default"],[32,36,39,26],[32,37,39,27,"setItem"],[32,44,39,34],[32,45,39,35],[32,57,39,47],[32,59,39,49,"sessionId"],[32,68,39,58],[32,69,39,59],[33,8,40,6],[34,8,41,6,"set"],[34,11,41,9],[34,12,41,10],[35,10,41,12,"sessionId"],[36,8,41,22],[36,9,41,23],[36,10,41,24],[37,8,42,6],[37,14,42,12,"get"],[37,17,42,15],[37,18,42,16],[37,19,42,17],[37,20,42,18,"fetchFavorites"],[37,34,42,32],[37,35,42,33],[37,36,42,34],[38,6,43,4],[38,7,43,5],[38,8,43,6],[38,15,43,13,"error"],[38,20,43,18],[38,22,43,20],[39,8,44,6,"console"],[39,15,44,13],[39,16,44,14,"error"],[39,21,44,19],[39,22,44,20],[39,51,44,49],[39,53,44,51,"error"],[39,58,44,56],[39,59,44,57],[40,6,45,4],[41,4,46,2],[41,5,46,3],[42,4,48,2,"fetchFavorites"],[42,18,48,16],[42,20,48,18],[42,26,48,18,"fetchFavorites"],[42,27,48,18],[42,32,48,30],[43,6,49,4],[43,12,49,10],[44,8,49,12,"sessionId"],[45,6,49,22],[45,7,49,23],[45,10,49,26,"get"],[45,13,49,29],[45,14,49,30],[45,15,49,31],[46,6,50,4],[46,10,50,8],[46,11,50,9,"sessionId"],[46,20,50,18],[46,22,50,20],[47,6,52,4,"set"],[47,9,52,7],[47,10,52,8],[48,8,52,10,"isLoading"],[48,17,52,19],[48,19,52,21],[49,6,52,26],[49,7,52,27],[49,8,52,28],[50,6,53,4],[50,10,53,8],[51,8,54,6],[51,14,54,12,"response"],[51,22,54,20],[51,25,54,23],[51,31,54,29,"api"],[51,43,54,32],[51,44,54,32,"api"],[51,47,54,32],[51,48,54,33,"get"],[51,51,54,36],[51,52,54,37],[51,66,54,51,"sessionId"],[51,75,54,60],[51,77,54,62],[51,78,54,63],[52,8,55,6,"set"],[52,11,55,9],[52,12,55,10],[53,10,56,8,"productIds"],[53,20,56,18],[53,22,56,20,"response"],[53,30,56,28],[53,31,56,29,"data"],[53,35,56,33],[53,36,56,34,"product_ids"],[53,47,56,45],[53,51,56,49],[53,53,56,51],[54,10,57,8,"products"],[54,18,57,16],[54,20,57,18,"response"],[54,28,57,26],[54,29,57,27,"data"],[54,33,57,31],[54,34,57,32,"products"],[54,42,57,40],[54,46,57,44],[54,48,57,46],[55,10,58,8,"isLoading"],[55,19,58,17],[55,21,58,19],[56,8,59,6],[56,9,59,7],[56,10,59,8],[57,6,60,4],[57,7,60,5],[57,8,60,6],[57,15,60,13,"error"],[57,20,60,18],[57,22,60,20],[58,8,61,6,"console"],[58,15,61,13],[58,16,61,14,"error"],[58,21,61,19],[58,22,61,20],[58,49,61,47],[58,51,61,49,"error"],[58,56,61,54],[58,57,61,55],[59,8,62,6,"set"],[59,11,62,9],[59,12,62,10],[60,10,62,12,"isLoading"],[60,19,62,21],[60,21,62,23],[61,8,62,29],[61,9,62,30],[61,10,62,31],[62,6,63,4],[63,4,64,2],[63,5,64,3],[64,4,66,2,"toggleFavorite"],[64,18,66,16],[64,20,66,18],[64,26,66,25,"productId"],[64,35,66,42],[64,39,66,47],[65,6,67,4],[65,12,67,10],[66,8,67,12,"sessionId"],[66,17,67,21],[67,8,67,23,"productIds"],[68,6,67,34],[68,7,67,35],[68,10,67,38,"get"],[68,13,67,41],[68,14,67,42],[68,15,67,43],[69,6,68,4],[69,10,68,8],[69,11,68,9,"sessionId"],[69,20,68,18],[69,22,68,20],[71,6,70,4],[72,6,71,4],[72,12,71,10,"isFav"],[72,17,71,15],[72,20,71,18,"productIds"],[72,30,71,28],[72,31,71,29,"includes"],[72,39,71,37],[72,40,71,38,"productId"],[72,49,71,47],[72,50,71,48],[73,6,72,4,"set"],[73,9,72,7],[73,10,72,8],[74,8,73,6,"productIds"],[74,18,73,16],[74,20,73,18,"isFav"],[74,25,73,23],[74,28,74,10,"productIds"],[74,38,74,20],[74,39,74,21,"filter"],[74,45,74,27],[74,46,74,28,"id"],[74,48,74,30],[74,52,74,34,"id"],[74,54,74,36],[74,59,74,41,"productId"],[74,68,74,50],[74,69,74,51],[74,72,75,10],[74,73,75,11],[74,76,75,14,"productIds"],[74,86,75,24],[74,88,75,26,"productId"],[74,97,75,35],[75,6,76,4],[75,7,76,5],[75,8,76,6],[76,6,78,4],[76,10,78,8],[77,8,79,6],[77,14,79,12,"api"],[77,26,79,15],[77,27,79,15,"api"],[77,30,79,15],[77,31,79,16,"post"],[77,35,79,20],[77,36,79,21],[77,50,79,35,"sessionId"],[77,59,79,44],[77,70,79,55,"productId"],[77,79,79,64],[77,81,79,66],[77,82,79,67],[78,8,80,6],[78,14,80,12,"get"],[78,17,80,15],[78,18,80,16],[78,19,80,17],[78,20,80,18,"fetchFavorites"],[78,34,80,32],[78,35,80,33],[78,36,80,34],[79,6,81,4],[79,7,81,5],[79,8,81,6],[79,15,81,13,"error"],[79,20,81,18],[79,22,81,20],[80,8,82,6,"console"],[80,15,82,13],[80,16,82,14,"error"],[80,21,82,19],[80,22,82,20],[80,48,82,46],[80,50,82,48,"error"],[80,55,82,53],[80,56,82,54],[81,8,83,6],[82,8,84,6,"set"],[82,11,84,9],[82,12,84,10],[83,10,84,12,"productIds"],[84,8,84,23],[84,9,84,24],[84,10,84,25],[85,6,85,4],[86,4,86,2],[86,5,86,3],[87,4,88,2,"isFavorite"],[87,14,88,12],[87,16,88,15,"productId"],[87,25,88,32],[87,29,88,37],[88,6,89,4],[88,13,89,11,"get"],[88,16,89,14],[88,17,89,15],[88,18,89,16],[88,19,89,17,"productIds"],[88,29,89,27],[88,30,89,28,"includes"],[88,38,89,36],[88,39,89,37,"productId"],[88,48,89,46],[88,49,89,47],[89,4,90,2],[90,2,91,0],[90,3,91,1],[90,4,91,2],[90,5,91,3],[91,0,91,4],[91,3]],"functionMap":{"names":["<global>","create$argument_0","initSession","fetchFavorites","toggleFavorite","productIds.filter$argument_0","isFavorite"],"mappings":"AAA;wDC2B;eCM;GDY;kBEE;GFgB;kBGE;4BCQ,sBD;GHY;cKE;GLE;EDC"},"hasCjsExports":false},"type":"js/module"}]}